import{_ as x,r as i,A as w,C as D,a as H,o as u,c as _,f as t,g as v,e as y,F as I,b as C,t as s,l as d,E as N,k as m,v as g,x as A,p as B,j as F}from"./index-e6eb8d31.js";import{a as O,b as V}from"./index-e64505e3.js";const E=a=>(B("data-v-24b1b7a0"),a=a(),F(),a),J={class:"responsive-table"},P=E(()=>t("thead",null,[t("tr",null,[t("th",null,"使用日期"),t("th",null,"狀態"),t("th",null,"票型"),t("th",null,"價格")])],-1)),j={class:"no-tickets"},G={__name:"TicketHistory",props:["ticketsHistory","status"],setup(a){const n=a,p=i(!0),c=i(0),l=i(4),f=i([]);function T(){l.value=l.value+1}const b=o=>f.value.some(r=>r._id===o._id);w(async()=>{c.value+=1}),D(()=>n.ticketsHistory,(o,r)=>{c.value>1&&JSON.stringify(o)!==JSON.stringify(r)&&(f.value=o.filter(e=>!r.some(k=>k._id===e._id)),T()),c.value+=1},{immediate:!1});const S=function(){switch(n.status){case 0:return n.ticketsHistory.slice(0,l.value);case 1:return p.value=!1,n.ticketsHistory;default:return 0}};return(o,r)=>{const h=H("router-link");return u(),_("section",null,[t("table",J,[P,t("tbody",null,[v(N,{name:"list",appear:""},{default:y(()=>[(u(!0),_(I,null,C(S(),(e,k)=>(u(),_("tr",{key:e._id},[t("td",null,s(b(e)?"(更新)":"")+" "+s(e.ticketDate&&d(O)(e.ticketDate)),1),t("td",null,s(d(V)(e.status)),1),t("td",null,s(e.ticketCategoryId.ticketType)+" "+s(e.ticketCategoryId.fastTrack?"快速通關":"一般票"),1),t("td",null,s(e.currentPurchasePrice)+"元",1)]))),128))]),_:1})])]),m(t("div",j," 無使用票券 ",512),[[g,n.ticketsHistory.length===0]]),m(t("div",null,[v(h,{to:"/user/userTicket/ticketHistory"},{default:y(()=>[A("查看全部")]),_:1})],512),[[g,d(p)]])])}}},W=x(G,[["__scopeId","data-v-24b1b7a0"]]);export{W as _};
